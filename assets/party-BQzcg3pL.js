import{_ as $,u as _,c as f,b as s,a as r,a4 as w,j as l,t as o,w as a,d as c,v as O,F as b,f as p,g as T,a2 as h,r as d,o as m,y as x,z as B,V as E,l as V,C as N}from"./index-DbY8GcTj.js";import{C as S,H as z,P as D,E as I}from"./PlayCircleOutlined-SMX4Hisb.js";const j={class:"travels"},F={class:"info"},H={class:"card"},P={class:"card__content"},L={class:"party_info"},Q={class:"title"},q={class:"title"},A={class:"title"},G={class:"content"},J={style:{"text-align":"center","margin-top":"10px","margin-bottom":"10px"}},K={style:{"text-align":"center","margin-top":"10px","margin-bottom":"10px"}},M={class:"sty"},R={style:{"border-radius":"12px",border:"3px solid #f5f5f5",width:"fit-content","margin-top":"5px"}},U={class:"foot"},W={class:"create"},y=_(),X={data(){return{partynull:0,id:1,infodata:{},items:[]}},methods:{ToEnd(){p.get(y.apiurl+"/party/status?party_id="+this.id+"&action_type=1",{headers:{"access-token":this.access_token}}),this.$router.push(`/finish/${this.id}`)},Tomember(){this.$router.push(`/member/${this.id}`)},tomerplan(){this.$router.push(`/merplan/${this.id}`)},tocreate(){this.$router.push(`/Createplan/${this.id}`)},tomyitinerarys(){this.$router.push(`/myitinerarys/${this.id}`)},apply_party(){p.get(y.apiurl+"/party/apply?party_id="+this.id,{headers:{"access-token":this.access_token}}).then(e=>{console.log(e),alert("申请成功！")}).catch(e=>{console.error(e)})},getin(){p.get(y.apiurl+"/party/itinerary/show?party_id="+this.id,{headers:{"access-token":this.access_token}}).then(e=>{console.log(e),this.items=e.data.itineraries,console.log(e.data.itineraries),e.data.itineraries===void 0&&(this.partynull=1)}).catch(e=>{console.error(e)})},partyinit(){const e=y.apiurl+"/party/get?party_id="+this.id,n={};p.get(e,n).then(t=>{console.log(t),this.infodata=t.data.party}).catch(t=>{console.error(t)})}},mounted(){console.log(this.$router),this.id=this.$route.params.id,this.access_token=T.get("access_token"),this.partyinit(),this.getin()},computed:{getIcon(){return e=>{switch(e){case 1:return I;case 2:return D;case 3:return z;case 4:return S;case 5:return h}}},getType(){return e=>{switch(e){case 1:return"路线";case 2:return"活动";case 3:return"住宿";case 4:return"餐饮";case 5:return"其他";default:return"未知类型"}}}}},Y=Object.assign(X,{__name:"party",setup(e){return(n,t)=>{const g=d("a-page-header"),u=d("a-button"),v=d("a-timeline-item"),k=d("a-timeline"),C=d("a-empty");return m(),f(b,null,[s("div",j,[r(g,{style:{border:"1px solid rgb(235, 237, 240)"},title:"活动详情",onBack:t[0]||(t[0]=()=>n.$router.go(-1))})]),s("div",F,[s("div",H,[t[19]||(t[19]=w('<div class="tools" data-v-085f30d2><div class="circle" data-v-085f30d2><span class="red box" data-v-085f30d2></span></div><div class="circle" data-v-085f30d2><span class="yellow box" data-v-085f30d2></span></div><div class="circle" data-v-085f30d2><span class="green box" data-v-085f30d2></span></div></div>',1)),s("div",P,[s("div",L,[s("div",Q,[t[7]||(t[7]=s("text",{class:"info_name"},"活动名:",-1)),t[8]||(t[8]=s("br",null,null,-1)),l(o(n.infodata.title),1)]),s("div",q,[t[9]||(t[9]=s("text",{class:"info_name"},"创建者:",-1)),t[10]||(t[10]=s("br",null,null,-1)),l(o(n.infodata.founder_id),1)]),s("div",A,[t[11]||(t[11]=s("text",{class:"info_name"},"成员数:",-1)),t[12]||(t[12]=s("br",null,null,-1)),l(o(n.infodata.member_count),1)])]),s("div",G,[t[13]||(t[13]=s("text",{class:"content_text"},"介绍:",-1)),t[14]||(t[14]=s("br",null,null,-1)),l('[本活动于"'+o(n.infodata.province)+","+o(n.infodata.city)+'"处进行] ',1),t[15]||(t[15]=s("br",null,null,-1)),l(o(n.infodata.content),1)]),s("div",J," 起止时间:"+o(n.infodata.start_time)+" - "+o(n.infodata.end_time),1),s("div",K,[r(u,{type:"dashed",onClick:t[1]||(t[1]=i=>n.apply_party())},{default:a(()=>t[16]||(t[16]=[l("申请加入")])),_:1}),r(u,{style:{"margin-left":"10px"},onClick:t[2]||(t[2]=i=>n.Tomember())},{default:a(()=>t[17]||(t[17]=[l("查看成员")])),_:1}),r(u,{type:"primary",onClick:t[3]||(t[3]=i=>n.ToEnd()),style:{"margin-left":"10px"}},{default:a(()=>t[18]||(t[18]=[l("结束行程")])),_:1})])])]),t[24]||(t[24]=s("div",{class:"center"},[s("text",null,"所有计划")],-1)),s("div",M,[r(k,null,{default:a(()=>[(m(!0),f(b,null,x(n.items,i=>(m(),f("div",{key:i.id},[r(v,null,{dot:a(()=>[(m(),B(E(n.getIcon(i.action_type)),{style:{"font-size":"16px"}}))]),default:a(()=>[l(" 计划: "+o(i.title)+" ",1),t[20]||(t[20]=s("br",null,null,-1)),l(" 类型："+o(n.getType(i.action_type))+" ",1),t[21]||(t[21]=s("br",null,null,-1)),l(" 内容："+o(i.remark)+" ",1),t[22]||(t[22]=s("br",null,null,-1)),l(" 时间："+o(i.schedule_start_time),1)]),_:2},1024),r(v,null,{dot:a(()=>[r(V(N),{style:{"font-size":"16px"}})]),default:a(()=>[l(" 结束时间: "+o(i.schedule_end_time)+" ",1),s("div",R,[r(u,{type:"link",onClick:Z=>n.$router.push("/itinerarys/"+i.id)},{default:a(()=>t[23]||(t[23]=[l(" 查看详细 ")])),_:2},1032,["onClick"])])]),_:2},1024)]))),128))]),_:1})]),c(s("div",null,[r(C)],512),[[O,n.partynull]])]),s("div",U,[s("div",W,[s("button",{class:"btn",onClick:t[4]||(t[4]=(...i)=>n.tocreate&&n.tocreate(...i))},"创建计划"),t[25]||(t[25]=s("br",null,null,-1)),s("button",{class:"btn",onClick:t[5]||(t[5]=(...i)=>n.tomyitinerarys&&n.tomyitinerarys(...i))},"查看撰写过的计划"),t[26]||(t[26]=s("br",null,null,-1)),s("button",{class:"btn",onClick:t[6]||(t[6]=(...i)=>n.tomerplan&&n.tomerplan(...i))},"待通过计划")])]),t[27]||(t[27]=s("br",null,null,-1)),t[28]||(t[28]=s("br",null,null,-1)),t[29]||(t[29]=s("br",null,null,-1)),t[30]||(t[30]=s("br",null,null,-1)),t[31]||(t[31]=s("br",null,null,-1)),t[32]||(t[32]=s("br",null,null,-1))],64)}}}),nt=$(Y,[["__scopeId","data-v-085f30d2"]]);export{nt as default};
