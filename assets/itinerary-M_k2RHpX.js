import{B as v,O as T,Y as B,A as $,S as h,M as N,E as z,o as u,c,b as d,U as m,l,a5 as O,z as b,w as s,V as P,h as f,t as r,X as V,a0 as j,a1 as D,u as F,k as w,a as n,F as H,f as g,g as q,a2 as A,r as y,j as i}from"./index-DbY8GcTj.js";import{C as K,H as M,P as Q,E as U}from"./PlayCircleOutlined-SMX4Hisb.js";import{i as X,E as Y}from"./index-DFkpxPor.js";const G=v({name:"ElTimeline",setup(o,{slots:t}){const e=T("timeline");return B("timeline",t),()=>$("ul",{class:[e.b()]},[h(t,"default")])}}),J=N({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:X},hollow:Boolean}),L=v({name:"ElTimelineItem"}),R=v({...L,props:J,setup(o){const t=o,e=T("timeline-item"),p=z(()=>[e.e("node"),e.em("node",t.size||""),e.em("node",t.type||""),e.is("hollow",t.hollow)]);return(a,_)=>(u(),c("li",{class:m([l(e).b(),{[l(e).e("center")]:a.center}])},[d("div",{class:m(l(e).e("tail"))},null,2),a.$slots.dot?f("v-if",!0):(u(),c("div",{key:0,class:m(l(p)),style:O({backgroundColor:a.color})},[a.icon?(u(),b(l(Y),{key:0,class:m(l(e).e("icon"))},{default:s(()=>[(u(),b(P(a.icon)))]),_:1},8,["class"])):f("v-if",!0)],6)),a.$slots.dot?(u(),c("div",{key:1,class:m(l(e).e("dot"))},[h(a.$slots,"dot")],2)):f("v-if",!0),d("div",{class:m(l(e).e("wrapper"))},[!a.hideTimestamp&&a.placement==="top"?(u(),c("div",{key:0,class:m([l(e).e("timestamp"),l(e).is("top")])},r(a.timestamp),3)):f("v-if",!0),d("div",{class:m(l(e).e("content"))},[h(a.$slots,"default")],2),!a.hideTimestamp&&a.placement==="bottom"?(u(),c("div",{key:1,class:m([l(e).e("timestamp"),l(e).is("bottom")])},r(a.timestamp),3)):f("v-if",!0)],2)],2))}});var I=V(R,[["__file","timeline-item.vue"]]);const W=j(G,{TimelineItem:I}),Z=D(I),x={class:"travels"},ee={key:0,class:"itinerary"},te=["src"],ae={key:1},C=F(),oe={props:{},data(){return{datago:null,datadata:null,id:1,party:{},info:{},partynull:!1}},methods:{gogogo(){window.location.replace("https://uri.amap.com/navigation?from="+this.datadata+",startpoint&to="+this.datago+",endpoint&via=&mode=car&policy=1&src=mypage&coordinate=gaode&callnative=0")},deleteItinerary(){const o=C.apiurl+"/party/itinerary/delete?itinerary_id="+this.id;g.get(o,{headers:{"access-token":this.access_token}}).then(t=>{console.log(t)}).catch(t=>{console.error(t)})},init(){const o=C.apiurl+"/party/itinerary/info?itinerary_id="+this.id,t={};g.get(o,t).then(e=>{console.log(e),this.partynull=!0,this.info=e.data.itinerary,e.data.base.code==10007&&(this.partynull=0,console.log(this.partynull))}).catch(e=>{console.error(e)})}},mounted(){this.id=Number(this.$route.params.id),this.init(),this.access_token=q.get("access_token")},computed:{getlocal(){return o=>{if(o!=="")return"https://restapi.amap.com/v3/staticmap?zoom=17&size=250*250&key=eae4d0491385d75b43d247afaef4247d&location="+o}},getroad(){return o=>{if(o!==void 0){const t=o.split(",")[0],e=o.split(",")[1];return g.get("https://restapi.amap.com/v3/geocode/geo?key=eae4d0491385d75b43d247afaef4247d&address="+t).then(p=>{console.log(p.data.geocodes[0].location),this.datadata=p.data.geocodes[0].location}),g.get("https://restapi.amap.com/v3/geocode/geo?key=eae4d0491385d75b43d247afaef4247d&address="+e).then(p=>{console.log(p.data.geocodes[0].location),this.datago=p.data.geocodes[0].location}),"从 "+t+" 到 "+e}}},getIcon(){return o=>{switch(o){case 1:return U;case 2:return Q;case 3:return M;case 4:return K;case 5:return A}}},getType(){return o=>{switch(o){case 1:return"路线";case 2:return"活动";case 3:return"住宿";case 4:return"餐饮";case 5:return"其他";default:return"未知类型"}}}}},ie=Object.assign(oe,{__name:"itinerary",setup(o){return w(!1),w(!1),(t,e)=>{const p=y("a-page-header"),a=Z,_=y("a-button"),E=W,S=y("a-empty");return u(),c(H,null,[d("div",x,[n(p,{style:{border:"1px solid rgb(235, 237, 240)"},title:"计划详情",onBack:e[0]||(e[0]=()=>t.$router.go(-1))})]),e[6]||(e[6]=d("br",null,null,-1)),t.partynull?(u(),c("div",ee,[n(E,{style:{"max-width":"600px","margin-left":"10%"}},{default:s(()=>[n(a,null,{default:s(()=>[i("计划名:"+r(t.info.title),1)]),_:1}),n(a,null,{default:s(()=>[i("序列:"+r(t.info.sequence),1)]),_:1}),n(a,null,{default:s(()=>[i(" 创建者:"+r(t.info.founder_id),1)]),_:1}),n(a,null,{default:s(()=>[i(" 类型："+r(t.getType(t.info.action_type)),1)]),_:1}),n(a,null,{default:s(()=>[i(" 备注："+r(t.info.remark),1)]),_:1}),n(a,null,{default:s(()=>[i(" 地点："+r(t.info.rectangle),1)]),_:1}),n(a,null,{default:s(()=>[d("div",null,[d("img",{src:t.getlocal(t.info.rectangle)},null,8,te)])]),_:1}),n(a,null,{default:s(()=>[i(r(t.getroad(t.info.route_json)),1)]),_:1}),n(a,null,{default:s(()=>[e[4]||(e[4]=i(" 路线： ")),n(_,{type:"primary",onClick:e[1]||(e[1]=k=>t.gogogo())},{default:s(()=>e[3]||(e[3]=[i("点击跳转到大地图")])),_:1})]),_:1}),n(a,null,{default:s(()=>[i(" 开始时间："+r(t.info.schedule_start_time),1)]),_:1}),n(a,null,{default:s(()=>[i(" 结束时间: "+r(t.info.schedule_end_time),1)]),_:1})]),_:1}),d("button",{onClick:e[2]||(e[2]=(...k)=>t.deleteItinerary&&t.deleteItinerary(...k))},e[5]||(e[5]=[d("span",{class:"shadow"},null,-1),d("span",{class:"edge"},null,-1),d("span",{class:"front text"}," 删除计划 ",-1)]))])):f("",!0),t.partynull?f("",!0):(u(),c("div",ae,[n(S)]))],64)}}});export{ie as default};
